<!doctype html>
<html>
<head>

<link rel="stylesheet" type="text/html" href="styles.css" />
<link href="MaterialIcons.css" rel="stylesheet" type="text/html">
  <base href="/">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="author" content="Ajax Solutions">
	<link rel="shortcut icon" href="assets/img/brand/Logo.png">
  <title>JBS Enterpeises Pvt Ltd.</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCvO0AHfg1cuND1KXbw3t5xZr5p4PVrEk4"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300&display=swap" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <style>
    .errorMessage{
       color: red;
     }
     .has-error .form-control{
    border-color: lightcoral !important;
    }

    .CssCheckIn{
    content: url("assets/img/brand/Logo_2.jpg");    
  }  
  </style>

<script>
  //google map create user markers
  //var UserMarker;
  var TowerMarker;
  var SubStationMarker;
  var UserCheckIn_Marker;
  var UserCheckOut_Marker;
  var UserOff_Marker;
  var UserInactive_Marker; 
  var TowerMarkers = [];
  var SubStationMarkers = [];
  var UserCheckIn_Markers = [];
  var UserCheckOut_Markers = [];
  var UserOff_Markers = [];
  var UserInactive_Markers = [];
  var coords = [];
  var UserTracking = [];
  var UserTrackings = [];
  var mapnew;
  var line = [];


  function myMapFunction(lat,lang, UserCode,UserName,Status,Battery,Speed,LastUpdate,Location,iconBase,map ) {                
    const myLatlng2 = new google.maps.LatLng(lat ,lang);     
    if(Status === 'Check In')
    {     
      var ico = new google.maps.MarkerImage("./assets/img/Content/Mobile_CheckIn.png")
       UserCheckIn_Marker = new google.maps.Marker({
      position: myLatlng2,         
      icon: ico ,//{                
            //  url: '../../../assets/img/Content/Mobile_CheckIn.png',               
            //},
      map: map,
      title: "User Code : " +  UserCode + 
             "--User Name : " +  UserName  + 
             "--status : " +  Status  + 
             "--Battery : " +  Battery + 
             "--Speed : " + Speed + 
             "--Last Update : " +  LastUpdate   + 
             "--Location : " + Location   
      });    
      UserCheckIn_Marker.setMap(map);     
      UserCheckIn_Markers.push(UserCheckIn_Marker);    
    }    
    if(Status === 'Check Out')
    {
      //var ico = new google.maps.MarkerImage("https://webdevtrick.com/wp-content/uploads/location.png")    
      var ico = new google.maps.MarkerImage("https://52.188.136.57/D/Images/Mobile_CheckOut.png?")      
      UserCheckOut_Marker = new google.maps.Marker({
        position: myLatlng2,
        //icon: iconBase + 'Mobile_CheckOut.png',
        icon: ico,// {                
              //url: '../../../assets/img/Content/Mobile_CheckOut.png',               
            //},
        map: map,
        title: "User Code : " +  UserCode + 
             "--User Name : " +  UserName  + 
             "--status : " +  Status  + 
             "--Battery : " +  Battery + 
             "--Speed : " + Speed + 
             "--Last Update : " +  LastUpdate   + 
             "--Location : " + Location   
        });    
        UserCheckOut_Marker.setMap(map);     
        UserCheckOut_Markers.push(UserCheckOut_Marker); 
    }
    if(Status === 'Inactive')
    {
      UserInactive_Marker = new google.maps.Marker({
        position: myLatlng2,
        //icon: iconBase + 'Mobile_Inactive.png',
        icon: {                
                url: '../../../assets/img/Content/UserLogin.jpg',   
             },        
        map: map, 
        title: "User Code : " +  UserCode + 
             "--User Name : " +  UserName  + 
             "--status : " +  Status  + 
             "--Battery : " +  Battery + 
             "--Speed : " + Speed + 
             "--Last Update : " +  LastUpdate   + 
             "--Location : " + Location   
        });    
        UserInactive_Marker.setMap(map);     
        UserInactive_Markers.push(UserInactive_Marker); 
    }
    if(Status === 'Off')
    {
      UserOff_Marker = new google.maps.Marker({
        position: myLatlng2,
        //icon: iconBase + 'Mobile_Off.png',
        icon: {                
              url: './assets/img/Content/Mobile_Off.png',               
            },
        map: map,
        title: "User Code : " +  UserCode + 
             "--User Name : " +  UserName  + 
             "--status : " +  Status  + 
             "--Battery : " +  Battery + 
             "--Speed : " + Speed + 
             "--Last Update : " +  LastUpdate   + 
             "--Location : " + Location   
        });    
        UserOff_Marker.setMap(map);     
        UserOff_Markers.push(UserOff_Marker); 
      }
  } 

  var towericon = '../assets/img/Content/Tower.png';
  //google map user tracking 
  function myMapUserTrackingFunction(trackingID,LoginId,userNameENG,mobileNo, dateTime,lat,
        lang,location,batteryPer,speed,iconBase,map,count)
   {
    const myLatlng2 = new google.maps.LatLng(lat ,lang);
    UserTracking = new google.maps.Marker({
      position: myLatlng2,
        //icon: iconBase + 'Tower.jpg',
        icon: {                
              url: towericon ,               
            },
        map: map,
        title: "--Login ID : " + LoginId + 
             "--User Name : " +  userNameENG  +           
             "--Mobile No. : " +  mobileNo + 
             "--Date Time : " + dateTime + 
             "--Latitude : " +  lat  + 
             "--Longitude : " + lang  +
             "--Location : " + location +
             "--Batterry Per : " + batteryPer +
             "--Speed : " + speed
        });    
        UserTracking.setMap(map);                  
        coords.push(myLatlng2);  
        
        if(count == 0)
        {         
          coords = [];               
        }  
     
        line[count] = new google.maps.Polyline({
        path: coords,
        geodesic:true,
        strokeColor: '#fc0703',
        strokeOpacity: 1.0,
        strokeWeight: 2
        });       
        
        line[count].setMap(map);             
   }
  
   
  
  //google map create asset markers
  function myMapAssetFunction(placeGroupCode,lat,lang,PlaceName,PlaceGroupName,AssetName,Location,PlaceAddress,
  iconBase,StateName,PinCode,map) {                
    const myLatlng2 = new google.maps.LatLng(lat ,lang);
      if(placeGroupCode === '2'){
        TowerMarker = new google.maps.Marker({
        position: myLatlng2,
        //icon: iconBase + 'Tower.jpg',
        icon: {                
              url: './assets/img/Content/Tower.png',               
            },
        map: map,
        title: "Tower Name : " +  AssetName + 
             "--Place Name : " + PlaceName + 
             "--Place Group Name : " +  PlaceGroupName  +           
             "--Location : " +  Location + 
             "--Place Address : " + PlaceAddress + 
             "--State Name : " +  StateName  + 
             "--Pin Code : " + PinCode  
        });    
        TowerMarker.setMap(map);  
        TowerMarker.setVisible(false);
        TowerMarkers.push(TowerMarker);   
        coords.push(myLatlng2);
      }

      if(placeGroupCode === '3'){
        SubStationMarker = new google.maps.Marker({
        position: myLatlng2,
        //icon: iconBase + 'SubStation-Icon.png',
        icon: {                
              url: '../assets/img/Content/SubStation-Icon.png',               
            },
        map: map,
        title: "Sub Station Name : " +  AssetName + 
             "--Place Name : " + PlaceName + 
             "--Place Group Name : " +  PlaceGroupName  +           
             "--Location : " +  Location + 
             "--Place Address : " + PlaceAddress + 
             "--State Name : " +  StateName + 
             "--Pin Code : " + PinCode  
        });    
        SubStationMarker.setMap(map);  
        SubStationMarker.setVisible(false);
        SubStationMarkers.push(SubStationMarker);          
      }     
      mapnew = map;
  }

  

  function CreateTransmissionLine()
  {    
    /*var line= new google.maps.Polyline({
      path: coords,
      geodesic: true,
      strokeColor: '#FF0000',
      strokeOpacity: 1.0,
      strokeWeight: 2
      });
      line.setMap(mapnew);*/
  }


  //google map user hide 
  function myMapUserHideFunction(UserType) {    
    if(UserType === 'Check In')
    {                 
      for (i = 0; i < UserCheckIn_Markers.length; i++)
      {            
        var marker = UserCheckIn_Markers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
    if(UserType === 'Check Out')
    {            
      for (i = 0; i < UserCheckOut_Markers.length; i++)
      {         
        var marker = UserCheckOut_Markers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
    if(UserType === 'Inactive')
    {                 
      for (i = 0; i < UserInactive_Markers.length; i++)
      {        
        var marker = UserInactive_Markers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
    if(UserType === 'Off') 
    {               
      for (i = 0; i < UserOff_Markers.length; i++)
      {        
        var marker = UserOff_Markers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
  }

  //google map hide tower
  function myMapAssetHideFunction(AssetType) {    
    if(AssetType === 'Tower')
    {             
      for (i = 0; i < TowerMarkers.length; i++)
      {
        var marker = TowerMarkers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      } 
    }
    if(AssetType === "SubStation")
    {
      for (i = 0; i < SubStationMarkers.length; i++)
      {
        var marker = SubStationMarkers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
  }
</script>

</head>
<body class="app">   
  <app-root>
   
  </app-root>
</body>
</html>
