<!doctype html>
<html>
<head>

<link rel="stylesheet" type="text/html" href="styles.css" />
<link href="MaterialIcons.css" rel="stylesheet" type="text/html">
  <base href="/">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="author" content="Ajax Solutions">
	<link rel="shortcut icon" href="assets/img/brand/Logo.png">
  <title>JBS Enterpeises Pvt Ltd.</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCvO0AHfg1cuND1KXbw3t5xZr5p4PVrEk4"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300&display=swap" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  
  <style>
    .errorMessage{
       color: red;
     }
     .has-error .form-control{
    border-color: lightcoral !important;
    }

    .CssCheckIn{
    content: url("assets/img/brand/Logo_2.jpg");    
  }  
  </style>

<script>
  //google map create user markers
  //var UserMarker;
  var TowerMarker;
  var SubStationMarker;
  var UserCheckIn_Marker;
  var UserCheckOut_Marker;
  var UserOff_Marker;
  var UserInactive_Marker; 
  var TowerMarkers = [];
  var SubStationMarkers = [];
  var UserCheckIn_Markers = [];
  var UserCheckOut_Markers = [];
  var UserOff_Markers = [];
  var UserInactive_Markers = [];
  var coords = [];
  var UserTracking = [];
  var UserTrackings = [];
  var mapnew;
  var line = [];
  var icon_url;
  var i;


  function myMapFunction(lat,lang, UserCode,UserName,Status,Battery,Speed,LastUpdate,Location,iconBase,map,i ) {                
    const myLatlng2 = new google.maps.LatLng(lat ,lang);      
    if(Status === 'Check In')
    {          
       UserCheckIn_Marker = new google.maps.Marker({
      position: myLatlng2,         
      icon: 'http://ajaxservercl.eastus.cloudapp.azure.com:4200/Mobile_CheckIn.png',
      map: map,
      title: "User Code : " +  UserCode + 
             "--User Name : " +  UserName  + 
             "--status : " +  Status  + 
             "--Battery : " +  Battery + 
             "--Speed : " + Speed + 
             "--Last Update : " +  LastUpdate   + 
             "--Location : " + Location   
      });    
      UserCheckIn_Marker.setMap(map);     
      UserCheckIn_Markers.push(UserCheckIn_Marker);    
    }    
    if(Status === 'Check Out')
    {          
      UserCheckOut_Marker = new google.maps.Marker({
        position: myLatlng2,
        icon: 'http://ajaxservercl.eastus.cloudapp.azure.com:4200/Mobile_CheckOut.png',      
        map: map,
        title: "User Code : " +  UserCode + 
             "--User Name : " +  UserName  + 
             "--status : " +  Status  + 
             "--Battery : " +  Battery + 
             "--Speed : " + Speed + 
             "--Last Update : " +  LastUpdate   + 
             "--Location : " + Location   
        });    
        UserCheckOut_Marker.setMap(map);     
        UserCheckOut_Markers.push(UserCheckOut_Marker); 
    }
    if(Status === 'Inactive')
    {
     // const labels = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";     
      UserInactive_Marker = new google.maps.Marker({        
        position: myLatlng2,       
        label: labels[i % labels.length], 
        icon: 'http://ajaxservercl.eastus.cloudapp.azure.com:4200/Mobile_Inactive.png',      
        map: map, 
        title: "User Code : " +  UserCode + 
             "--User Name : " +  UserName  + 
             "--status : " +  Status  + 
             "--Battery : " +  Battery + 
             "--Speed : " + Speed + 
             "--Last Update : " +  LastUpdate   + 
             "--Location : " + Location   
        });   
        UserInactive_Marker.setMap(map);     
        UserInactive_Markers.push(UserInactive_Marker); 
        
       //  new MarkerClusterer(map, UserInactive_Marker, {
       //   imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m',
       // });

        
       // MarkerClusterer.setMap(map);     
        //UserInactive_Markers.push(UserInactive_Marker); 
    }
    if(Status === 'Off')
    {
      UserOff_Marker = new google.maps.Marker({
        position: myLatlng2,
        //icon: iconBase + 'Mobile_Off.png',
        icon: 'http://ajaxservercl.eastus.cloudapp.azure.com:4200/Mobile_Off.png',          
        map: map,
        title: "User Code : " +  UserCode + 
             "--User Name : " +  UserName  + 
             "--status : " +  Status  + 
             "--Battery : " +  Battery + 
             "--Speed : " + Speed + 
             "--Last Update : " +  LastUpdate   + 
             "--Location : " + Location   
        });    
        UserOff_Marker.setMap(map);     
        UserOff_Markers.push(UserOff_Marker); 
      }
  } 

  //var towericon = '../assets/img/Content/Tower.png';
  
  //google map user tracking 
  function myMapUserTrackingFunction(trackingID,LoginId,userNameENG,mobileNo, dateTime,lat,
        lang,location,batteryPer,speed,iconBase,map,count,length)
   {
    if(count == 0)
    {
      icon_url = 'http://ajaxservercl.eastus.cloudapp.azure.com:4200/Green_Circle.png';
    }
    else if(count == length - 1)
    {
      icon_url = 'http://ajaxservercl.eastus.cloudapp.azure.com:4200/Red_Circle.png';
    }
    else
    {
      icon_url = 'http://ajaxservercl.eastus.cloudapp.azure.com:4200/circle_black.png';
    }
    
    
    //alert('start');
    //var declaration = document.styleSheets[0].cssRules[0].style;
    //var propvalue = declaration.getPropertyValue("color");
    //alert(declaration);
    //alert('start 1');
    //alert(propvalue);
    //alert('end');

    const myLatlng2 = new google.maps.LatLng(lat ,lang);
    UserTracking = new google.maps.Marker({
      position: myLatlng2,
        //icon: iconBase + 'Tower.jpg',
        icon: {
          url : icon_url
        },
        map: map,
        title: "Login ID : " + LoginId + "\n" +
             "User Name : " +  userNameENG  +  "\n" +          
             //"Mobile No. : " +  mobileNo + "\n" +
             "Date Time : " + dateTime + "\n" +
             "Latitude : " +  lat  + "\n" +
             "Longitude : " + lang  + "\n" +
             "Location : " + location + "\n" +
             "Batterry Per : " + batteryPer + "\n" +
             "Speed : " + speed
        });    
        UserTracking.setMap(map);       

        if(count == 0)
        {         
          coords = [];               
        }
        coords.push(myLatlng2);         
        
        line[count] = new google.maps.Polyline({
        path: coords,
        geodesic:true,       
        strokeColor: '#fc0703',
        strokeOpacity: 1.0,
        strokeWeight: 2,
        icons: [{
                icon: {path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW},               
                offset: '100%',                     
            }],
        });               
        line[count].setMap(map);          
   }
  
  //google map create asset markers
  function myMapAssetFunction(placeGroupCode,lat,lang,PlaceName,PlaceGroupName,AssetName,Location,PlaceAddress,
  iconBase,StateName,PinCode,map) {                
    const myLatlng2 = new google.maps.LatLng(lat ,lang);
      if(placeGroupCode === '2'){       
       
       TowerMarker = new google.maps.Marker({
        position: myLatlng2,   
        label: labels[i % labels.length],    
        icon: {                
              url: 'http://ajaxdevdbcl.eastus.cloudapp.azure.com:4200/Tower.png',      
            },
        map: map,
        title: "Tower Name : " +  AssetName + 
             "--Place Name : " + PlaceName + 
             "--Place Group Name : " +  PlaceGroupName  +      
             "--Location : " +  Location + 
             "--Place Address : " + PlaceAddress + 
             "--State Name : " +  StateName  + 
             "--Pin Code : " + PinCode  
        });    

      

        TowerMarker.setMap(map);  
        TowerMarker.setVisible(false);
        TowerMarkers.push(TowerMarker);   
        coords.push(myLatlng2);
      }

      if(placeGroupCode === '3'){
        SubStationMarker = new google.maps.Marker({
        position: myLatlng2,
        //icon: iconBase + 'SubStation-Icon.png',
        icon: {                
              url: 'http://ajaxdevdbcl.eastus.cloudapp.azure.com:4200/SubStation-Icon.png',               
              
            },
        map: map,
        title: "Sub Station Name : " +  AssetName + 
             "--Place Name : " + PlaceName + 
             "--Place Group Name : " +  PlaceGroupName  +           
             "--Location : " +  Location + 
             "--Place Address : " + PlaceAddress + 
             "--State Name : " +  StateName + 
             "--Pin Code : " + PinCode  
        });    
        SubStationMarker.setMap(map);  
        SubStationMarker.setVisible(false);
        SubStationMarkers.push(SubStationMarker);          
      }     
      mapnew = map;
  }

  

  function CreateTransmissionLine()
  {    
    /*var line= new google.maps.Polyline({
      path: coords,
      geodesic: true,
      strokeColor: '#FF0000',
      strokeOpacity: 1.0,
      strokeWeight: 2
      });
      line.setMap(mapnew);*/
  }


  //google map user hide 
  function myMapUserHideFunction(UserType) {    
    if(UserType === 'Check In')
    {                 
      for (i = 0; i < UserCheckIn_Markers.length; i++)
      {            
        var marker = UserCheckIn_Markers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
    if(UserType === 'Check Out')
    {            
      for (i = 0; i < UserCheckOut_Markers.length; i++)
      {         
        var marker = UserCheckOut_Markers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
    if(UserType === 'Inactive')
    {                 
      for (i = 0; i < UserInactive_Markers.length; i++)
      {        
        var marker = UserInactive_Markers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
    if(UserType === 'Off') 
    {               
      for (i = 0; i < UserOff_Markers.length; i++)
      {        
        var marker = UserOff_Markers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
  }

  //google map hide tower
  function myMapAssetHideFunction(AssetType) {    
    if(AssetType === 'Tower')
    {             
      for (i = 0; i < TowerMarkers.length; i++)
      {
        var marker = TowerMarkers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      } 
    }
    if(AssetType === "SubStation")
    {
      for (i = 0; i < SubStationMarkers.length; i++)
      {
        var marker = SubStationMarkers[i];
        if (!marker.getVisible()) {
          marker.setVisible(true);
        } else {
          marker.setVisible(false);
        }
      }
    }
  }
</script>

</head>
<body class="app">   
  <app-root>
   
  </app-root>
</body>
</html>
